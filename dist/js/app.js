function fixerio_update(e){jQuery.getJSON("http://api.fixer.io/latest",function(i){for(var a,t="#%CURRENCY%-data",o=0;o<e.length;o++)a=t.replace("%CURRENCY%",e[o]),$(a).text(i.rates[e[o]]);setTimeout(fixerio_update,3e5,e)})}function fixerio_api(e){jQuery.getJSON("http://api.fixer.io/latest",function(i){var a=$("#currenciesTarget"),t='<tr><td>%CURRENCY%</td><td id="%CURRENCY%-data"></td></tr>',o="<tr><td>%CURRENCY%</td><td>%AMOUNT%</td></tr>",n="#%CURRENCY%-data",r=o.replace("%CURRENCY%",i.base),s=n;r=r.replace("%AMOUNT%","1.00"),a.append(r);for(var l=0;l<e.length;l++)r=t.replace("%CURRENCY%",e[l]),r=r.replace("%CURRENCY%",e[l]),s=n.replace("%CURRENCY%",e[l]),a.append(r),$(s).text(i.rates[e[l]]);setTimeout(fixerio_update,3e5,e)})}function CreateMarker(e,i){var a;a=new google.maps.Marker({map:i,position:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},title:e.name})}function MainViewModel(e){var i=this;i.container=new LocContainer(e),i.currencies=["USD","CHF","GBP","AUD","CAD","CZK"],i.Rome={lat:41.9,lng:12.5},i.map=new google.maps.Map(document.getElementById("romeMap"),{zoom:12,center:i.Rome}),i.placeService=new google.maps.places.PlacesService(i.map)}function initialize(){var e=new MainViewModel(locationData);fixerio_api(e.currencies),ko.applyBindings(e),e.container.allVisible()}function init(){google.maps.event.addDomListener(window,"load",initialize),console.log("Runs on ready!")}var Location=function(e){this.name=ko.observable(e.name||""),this.address=ko.observableArray(e.address||[""]),this.wiki=ko.observable(e.wiki||""),this.type=ko.observable(e.type||5),this.website=ko.observable(e.website||""),this.keywords=ko.observableArray(e.keywords||[]),this.visible=ko.observable(!0),this.marker=ko.observable(),this.wikiDisplay=ko.observable("")};Location.prototype=Object.create(Object.prototype),Location.prototype.constructor=Location,Location.prototype.search=function(e){if(this.name().toLowerCase().includes(e))return this.visible(!0),!0;for(var i=this.keywords().length-1;i>=0;i--)if(this.keywords()[i].toLowerCase().includes(e))return!0;return this.visible(!1),!1},Location.prototype.wikiGet=function(){var e=this,i="https://en.wikipedia.org/w/api.php",a='<h3>%TITLE%</h3><p>%DESCRIPTION</p><p>Find out more <a href="%WIKIURL%">here</a> at Wikipedia or <a href="%WEBURL%">here</a> at the home page.</p>';$.ajax({url:i+"?action=opensearch&search="+e.name()+"&format=json",type:"GET",dataType:"jsonp"}).done(function(i){if(a=a.replace("%WEBURL%",e.website()),"none"!=e.wiki()){for(var t=i[3].length-1;t>=0;t--)if(i[3][t]==e.wiki()){a=a.replace("%DESCRIPTION%",i[2][t]),a=a.replace("%WIKIURL%",e.wiki()),e.wikiDisplay(a);break}}else{var o='<h3>%NAME%</h3><p>Could not find any data from Wikipedia from this location but you can go to the website <a href="%WEBURL%">here</a></p>';o=o.replace("%NAME%",e.name()),o=o.replace("%WEBURL%",e.website()),e.wikiDisplay(o)}}).fail(function(i){var a='<h3>%NAME%</h3><p>Could not find any data from Wikipedia from this location but you can go to the website <a href="%WEBURL%">here</a></p>';a=a.replace("%NAME%",e.name()),a=a.replace("%WEBURL%",e.website()),e.wikiDisplay(a)}).always(function(e){console.log("Complete")})};var LocContainer=function(e){var i=this;i.locations=ko.observableArray(),e["rome-app"].forEach(function(e){i.locations.push(new Location(e))})};LocContainer.prototype=Object.create(Object.prototype),LocContainer.prototype.constructor=LocContainer,LocContainer.prototype.search=function(e){var i=[];return this.locations().forEach(function(i){i.visible&&i.search(e.toLowerCase())&&visible.push(i.name)}),i},LocContainer.prototype.setTypeVisible=function(e){this.locations().forEach(function(i){i.type()!=e?i.visible(!1):i.visible(!0)}),console.log("SetTypeVisible "+String(e))},LocContainer.prototype.allVisible=function(){this.locations().forEach(function(e){e.visible(!0)}),console.log("All Visible")};var locationData={"rome-app":[{name:"Colosseum",address:["Piazza del Colosseo, Rome, Italy"],website:"http://www.coopculture.it/en/the-colosseum.cfm",wiki:"https://en.wikipedia.org/wiki/Colosseum",type:0,keywords:["gladiator","fight","ring","games","sport"]},{name:"Pantheon, Rome",address:["Piazza della Rotonda Rome, Italy"],website:"http://www.turismoroma.it/cosa-fare/pantheon?lang=en",wiki:"https://en.wikipedia.org/wiki/Pantheon,_Rome",type:0,keywords:["church","dome","temple"]},{name:"St. Peter's Basilica",address:["Piazza San Pietro, 00120 Città del Vaticano, Vatican City"],website:"http://www.vaticanstate.va/content/vaticanstate/en/monumenti/basilica-di-s-pietro.html",wiki:"https://en.wikipedia.org/wiki/St._Peter%27s_Basilica",type:0,keywords:["church","basilica","vatican","pope","peter","saint"]},{name:"Pyramid of Cestia",address:["Via Raffaele Persichetti, 00153 Roma, Italy"],website:"http://www.coopculture.it/en/heritage.cfm?id=59",wiki:"https://en.wikipedia.org/wiki/Pyramid_of_Cestius",type:0,keywords:["pyramid","gaius","cestius","tomb","ruins"]},{name:"Underground Basilica of Porta Maggiore",address:["Piazzale Labicano angolo via Prenestina, Via Prenestina, Roma, Italy"],website:"http://archeoroma.beniculturali.it/en/archaeological-site/underground-basilica-near-porta-maggiore",wiki:"https://en.wikipedia.org/wiki/Underground_basilica_of_Porta_Maggiore",type:0,keywords:["basilica","underground","neopythagoreans"]},{name:"Palazzo Delle Esposizioni",address:["Via Nazionale, 194, 00184 Roma, Italy"],website:"http://english.palazzoesposizioni.it/Home.aspx",wiki:"https://en.wikipedia.org/wiki/Palazzo_delle_Esposizioni",type:0,keywords:["exhibition","hall","cultural","center","museum"]},{name:"Palatine Hill",address:["Via della Salara Vecchia, 5/6, Roma, Italy"],website:"http://www.coopculture.it/en/heritage.cfm?id=4",wiki:"https://en.wikipedia.org/wiki/Palatine_Hill",type:0,keywords:["palatine","hill","forum","ruins","ancient","rome"]},{name:"Tourist Information Centers",address:["Via Giovanni Giolitti 34, Roma, Italy","Via di San Basilio 51, Roma, Italy","Palazzo delle Esposizioni, Roma, Italy","Via dei Fori Imperiali, Roma, Italy"],website:"http://www.turismoroma.it/info_viaggio/pit",wiki:"none",type:1,keywords:["information","center","pit","point"]},{name:"Leonardo da Vinci–Fiumicino Airport",address:["Via dell' Aeroporto di Fiumicino, 320, 00054 Fiumicino RM, Italy"],website:"http://www.adr.it/fiumicino",wiki:"https://en.wikipedia.org/wiki/Leonardo_da_Vinci%E2%80%93Fiumicino_Airport",type:3,keywords:["airport","ryanair","fiumicino","neos","alitalia","airplanes"]},{name:"Termini Station",address:["Roma Termini, Italy"],website:"http://www.trenitalia.com/tcom-en",type:3,keywords:["trains","station","choo"]},{name:"Trevi Fountain",address:["Piazza di Trevi, 00187 Roma, Italy"],website:"http://www.trevifountain.net/",wiki:"https://en.wikipedia.org/wiki/Trevi_Fountain",type:0,keywords:["trevi","fountain","wish","salvi","bracci"]}]};
function fixerio_update(e){jQuery.getJSON("http://api.fixer.io/latest",function(i){for(var a,t="#%CURRENCY%-data",o=0;o<e.length;o++)a=t.replace("%CURRENCY%",e[o]),$(a).text(i.rates[e[o]]);setTimeout(fixerio_update,3e5,e)})}function fixerio_api(e){jQuery.getJSON("http://api.fixer.io/latest",function(i){var a=$("#currenciesTarget"),t='<tr><td>%CURRENCY%</td><td id="%CURRENCY%-data"></td></tr>',o="<tr><td>%CURRENCY%</td><td>%AMOUNT%</td></tr>",r="#%CURRENCY%-data",n=o.replace("%CURRENCY%",i.base),s=r;n=n.replace("%AMOUNT%","1.00"),a.append(n);for(var l=0;l<e.length;l++)n=t.replace("%CURRENCY%",e[l]),n=n.replace("%CURRENCY%",e[l]),s=r.replace("%CURRENCY%",e[l]),a.append(n),$(s).text(i.rates[e[l]]);setTimeout(fixerio_update,3e5,e)})}function MainViewModel(e){var i=this;i.currencies=["USD","CHF","GBP","AUD","CAD","CZK"],i.Rome={lat:41.9,lng:12.5},i.map=new google.maps.Map(document.getElementById("romeMap"),{zoom:12,center:i.Rome}),i.placeService=new google.maps.places.PlacesService(i.map)}function initialize(){var e=new MainViewModel(locationData);fixerio_api(e.currencies),ko.applyBindings(e)}function initD(){google.maps.event.addDomListener(window,"load",initialize),console.log("Runs on ready!"),console.log("BUTTHEAD")}var locationData={"rome-app":[{name:"Colosseum",address:["Piazza del Colosseo, Rome, Italy"],website:"http://www.coopculture.it/en/the-colosseum.cfm",wiki:"https://en.wikipedia.org/wiki/Colosseum",type:0,keywords:["gladiator","fight","ring","games","sport"]},{name:"Pantheon, Rome",address:["Piazza della Rotonda Rome, Italy"],website:"http://www.turismoroma.it/cosa-fare/pantheon?lang=en",wiki:"https://en.wikipedia.org/wiki/Pantheon,_Rome",type:0,keywords:["church","dome","temple"]},{name:"St. Peter's Basilica",address:["Piazza San Pietro, 00120 Città del Vaticano, Vatican City"],website:"http://www.vaticanstate.va/content/vaticanstate/en/monumenti/basilica-di-s-pietro.html",wiki:"https://en.wikipedia.org/wiki/St._Peter%27s_Basilica",type:0,keywords:["church","basilica","vatican","pope","peter","saint"]},{name:"Pyramid of Cestia",address:["Via Raffaele Persichetti, 00153 Roma, Italy"],website:"http://www.coopculture.it/en/heritage.cfm?id=59",wiki:"https://en.wikipedia.org/wiki/Pyramid_of_Cestius",type:0,keywords:["pyramid","gaius","cestius","tomb","ruins"]},{name:"Underground Basilica of Porta Maggiore",address:["Piazzale Labicano angolo via Prenestina, Via Prenestina, Roma, Italy"],website:"http://archeoroma.beniculturali.it/en/archaeological-site/underground-basilica-near-porta-maggiore",wiki:"https://en.wikipedia.org/wiki/Underground_basilica_of_Porta_Maggiore",type:0,keywords:["basilica","underground","neopythagoreans"]},{name:"Palazzo Delle Esposizioni",address:["Via Nazionale, 194, 00184 Roma, Italy"],website:"http://english.palazzoesposizioni.it/Home.aspx",wiki:"https://en.wikipedia.org/wiki/Palazzo_delle_Esposizioni",type:0,keywords:["exhibition","hall","cultural","center","museum"]},{name:"Palatine Hill",address:["Via della Salara Vecchia, 5/6, Roma, Italy"],website:"http://www.coopculture.it/en/heritage.cfm?id=4",wiki:"https://en.wikipedia.org/wiki/Palatine_Hill",type:0,keywords:["palatine","hill","forum","ruins","ancient","rome"]},{name:"Tourist Information Centers",address:["Via Giovanni Giolitti 34, Roma, Italy","Via di San Basilio 51, Roma, Italy","Palazzo delle Esposizioni, Roma, Italy","Via dei Fori Imperiali, Roma, Italy"],website:"http://www.turismoroma.it/info_viaggio/pit",wiki:"none",type:1,keywords:["information","center","pit","point"]},{name:"Leonardo da Vinci–Fiumicino Airport",address:["Via dell' Aeroporto di Fiumicino, 320, 00054 Fiumicino RM, Italy"],website:"http://www.adr.it/fiumicino",wiki:"https://en.wikipedia.org/wiki/Leonardo_da_Vinci%E2%80%93Fiumicino_Airport",type:3,keywords:["airport","ryanair","fiumicino","neos","alitalia","airplanes"]},{name:"Termini Station",address:["Roma Termini, Italy"],website:"http://www.trenitalia.com/tcom-en",type:3,keywords:["trains","station","choo"]},{name:"Trevi Fountain",address:["Piazza di Trevi, 00187 Roma, Italy"],website:"http://www.trevifountain.net/",wiki:"https://en.wikipedia.org/wiki/Trevi_Fountain",type:0,keywords:["trevi","fountain","wish","salvi","bracci"]}]},Location=function(e){this.name=ko.observable(e.name||""),this.address=ko.observableArray(e.address||[""]),this.wiki=ko.observable(e.wiki||""),this.type=ko.observable(e.type||5),this.website=ko.observable(e.website||""),this.keywords=ko.observableArray(e.keywords||[]),this.visible=ko.observable(!0),this.marker=ko.observable(),this.wikiDisplay=ko.observable("")};Location.prototype=Object.create(Object.prototype),Location.prototype.constructor=Location,Location.prototype.search=function(e){if(this.name().toLowerCase().includes(e))return this.visible(!0),!0;for(var i=this.keywords().length-1;i>=0;i--)if(this.keywords()[i].toLowerCase().includes(e))return!0;return this.visible(!1),!1},Location.prototype.wikiGet=function(){var e=this,i="https://en.wikipedia.org/w/api.php",a='<h3>%TITLE%</h3><p>%DESCRIPTION</p><p>Find out more <a href="%WIKIURL%">here</a> at Wikipedia or <a href="%WEBURL%">here</a> at the home page.</p>';$.ajax({url:i+"?action=opensearch&search="+e.name()+"&format=json",type:"GET",dataType:"jsonp"}).done(function(i){if(a=a.replace("%WEBURL%",e.website()),"none"!=e.wiki()){for(var t=i[3].length-1;t>=0;t--)if(i[3][t]==e.wiki()){a=a.replace("%DESCRIPTION%",i[2][t]),a=a.replace("%WIKIURL%",e.wiki()),e.wikiDisplay(a);break}}else{var o='<h3>%NAME%</h3><p>Could not find any data from Wikipedia from this location but you can go to the website <a href="%WEBURL%">here</a></p>';o=o.replace("%NAME%",e.name()),o=o.replace("%WEBURL%",e.website()),e.wikiDisplay(o)}}).fail(function(i){var a='<h3>%NAME%</h3><p>Could not find any data from Wikipedia from this location but you can go to the website <a href="%WEBURL%">here</a></p>';a=a.replace("%NAME%",e.name()),a=a.replace("%WEBURL%",e.website()),e.wikiDisplay(a)}).always(function(e){console.log("Complete")})};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcGQuanMiXSwibmFtZXMiOlsiZml4ZXJpb191cGRhdGUiLCJjdXJyZW5jaWVzIiwialF1ZXJ5IiwiZ2V0SlNPTiIsImRhdGEiLCJ0ZW1wSWQiLCJpZFRlbXBsYXRlIiwiaSIsImxlbmd0aCIsInJlcGxhY2UiLCIkIiwidGV4dCIsInJhdGVzIiwic2V0VGltZW91dCIsImZpeGVyaW9fYXBpIiwiY3VycmVuY3kiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlMSIsInRlbXAiLCJiYXNlIiwiYXBwZW5kIiwiQ3JlYXRlTWFya2VyIiwicGxhY2UiLCJtYXAiLCJtYXJrZXIiLCJnb29nbGUiLCJtYXBzIiwiTWFya2VyIiwicG9zaXRpb24iLCJsYXQiLCJnZW9tZXRyeSIsImxvY2F0aW9uIiwibG5nIiwidGl0bGUiLCJuYW1lIiwiTWFpblZpZXdNb2RlbCIsImpzb25GaWxlIiwic2VsZiIsInRoaXMiLCJjb250YWluZXIiLCJMb2NDb250YWluZXIiLCJSb21lIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJwbGFjZVNlcnZpY2UiLCJwbGFjZXMiLCJQbGFjZXNTZXJ2aWNlIiwiaW5pdGlhbGl6ZSIsIm1haW4iLCJsb2NhdGlvbkRhdGEiLCJrbyIsImFwcGx5QmluZGluZ3MiLCJhbGxWaXNpYmxlIiwiaW5pdCIsImV2ZW50IiwiYWRkRG9tTGlzdGVuZXIiLCJ3aW5kb3ciLCJjb25zb2xlIiwibG9nIiwiTG9jYXRpb24iLCJpbml0RGF0YSIsIm9ic2VydmFibGUiLCJhZGRyZXNzIiwib2JzZXJ2YWJsZUFycmF5Iiwid2lraSIsInR5cGUiLCJ3ZWJzaXRlIiwia2V5d29yZHMiLCJ2aXNpYmxlIiwid2lraURpc3BsYXkiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInNlYXJjaCIsInBhcnRpYWwiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwid2lraUdldCIsImJhc2V1cmwiLCJjb250ZW50IiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiZG9uZSIsImZhaWxlZCIsImZhaWwiLCJhbHdheXMiLCJsb2NhdGlvbnMiLCJmb3JFYWNoIiwiaXRlbSIsInB1c2giLCJ3b3JkIiwidmlzaWJsZUl0ZW1zIiwic2V0VHlwZVZpc2libGUiLCJTdHJpbmciLCJyb21lLWFwcCIsImluaXREIl0sIm1hcHBpbmdzIjoiQUE0SEEsUUFBU0EsZ0JBQWVDLEdBQ3BCQyxPQUFPQyxRQUFRLDZCQUE4QixTQUFTQyxHQUdsRCxJQUFLLEdBRERDLEdBREFDLEVBQWEsbUJBRVJDLEVBQUksRUFBR0EsRUFBSU4sRUFBV08sT0FBUUQsSUFDbkNGLEVBQVNDLEVBQVdHLFFBQVEsYUFBY1IsRUFBV00sSUFDckRHLEVBQUVMLEdBQVFNLEtBQUtQLEVBQUtRLE1BQU1YLEVBQVdNLElBRXpDTSxZQUFXYixlQUFnQixJQUFRQyxLQUkzQyxRQUFTYSxhQUFZYixHQUNqQkMsT0FBT0MsUUFBUSw2QkFBOEIsU0FBU0MsR0FDbEQsR0FBSVcsR0FBV0wsRUFBRSxxQkFDYk0sRUFBVyw2REFDWEMsRUFBWSxnREFDWlgsRUFBYSxtQkFDYlksRUFBT0QsRUFBVVIsUUFBUSxhQUFjTCxFQUFLZSxNQUM1Q2QsRUFBU0MsQ0FDYlksR0FBT0EsRUFBS1QsUUFBUSxXQUFZLFFBQ2hDTSxFQUFTSyxPQUFPRixFQUNoQixLQUFLLEdBQUlYLEdBQUksRUFBR0EsRUFBSU4sRUFBV08sT0FBUUQsSUFDbkNXLEVBQU9GLEVBQVNQLFFBQVEsYUFBY1IsRUFBV00sSUFDakRXLEVBQU9BLEVBQUtULFFBQVEsYUFBY1IsRUFBV00sSUFDN0NGLEVBQVNDLEVBQVdHLFFBQVEsYUFBY1IsRUFBV00sSUFDckRRLEVBQVNLLE9BQU9GLEdBQ2hCUixFQUFFTCxHQUFRTSxLQUFLUCxFQUFLUSxNQUFNWCxFQUFXTSxJQUV6Q00sWUFBV2IsZUFBZ0IsSUFBUUMsS0F5SjNDLFFBQVNvQixjQUFhQyxFQUFPQyxHQUN6QixHQUFJQyxFQUNKQSxHQUFTLEdBQUlD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YmxlIG1vZGVsIGZvciBlYWNoIExvY2F0aW9uL01hcmtlciovXG52YXIgTG9jYXRpb24gPSBmdW5jdGlvbiggaW5pdERhdGEgKSB7XG4gICAgdGhpcy5uYW1lID0ga28ub2JzZXJ2YWJsZSggaW5pdERhdGEubmFtZSB8fCAnJyApO1xuICAgIHRoaXMuYWRkcmVzcyA9IGtvLm9ic2VydmFibGVBcnJheSggaW5pdERhdGEuYWRkcmVzcyB8fCBbXCJcIl0gKTtcbiAgICB0aGlzLndpa2kgPSBrby5vYnNlcnZhYmxlKCBpbml0RGF0YS53aWtpIHx8ICcnICk7XG4gICAgdGhpcy50eXBlID0ga28ub2JzZXJ2YWJsZSggaW5pdERhdGEudHlwZSB8fCA1ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAwIC0gSGlzdG9yaWNhbCBNYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgLSBJbmZvcm1hdGlvbiBDZW50ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgLSBSZXN0YXVyYW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAzIC0gVHJhbnNwb3J0YXRpb24gSHViIGJ1cy90cmFpbi9haXJwb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0IC0gQ2h1cmNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1IC0gT3RoZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgIHRoaXMud2Vic2l0ZSA9IGtvLm9ic2VydmFibGUoIGluaXREYXRhLndlYnNpdGUgfHwgJycgKTtcbiAgICB0aGlzLmtleXdvcmRzID0ga28ub2JzZXJ2YWJsZUFycmF5KCBpbml0RGF0YS5rZXl3b3JkcyB8fCBbXSk7XG4gICAgdGhpcy52aXNpYmxlID0ga28ub2JzZXJ2YWJsZSh0cnVlKTtcbiAgICB0aGlzLm1hcmtlciA9IGtvLm9ic2VydmFibGUoKTsgLy8gVE9ETzogd2lsbCBiZSBNYXJrZXIgb2JqZWN0XG4gICAgdGhpcy53aWtpRGlzcGxheSA9IGtvLm9ic2VydmFibGUoXCJcIik7XG59O1xuTG9jYXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPYmplY3QucHJvdG90eXBlKTtcbkxvY2F0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExvY2F0aW9uO1xuXG5Mb2NhdGlvbi5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocGFydGlhbCkge1xuICAgIGlmICh0aGlzLm5hbWUoKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBhcnRpYWwpKSB7XG4gICAgICAgIHRoaXMudmlzaWJsZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMua2V5d29yZHMoKS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYodGhpcy5rZXl3b3JkcygpW2ldLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGFydGlhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZpc2libGUoZmFsc2UpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblxuLy8gU2V0cyB3aWtpRGlzcGxheSBpbiBhZGRpdGlvbiB0byB3ZWJzaXRlIFVSTFxuTG9jYXRpb24ucHJvdG90eXBlLndpa2lHZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGJhc2V1cmwgPSAnaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3cvYXBpLnBocCc7XG4gICAgdmFyIGNvbnRlbnQgPSAnPGgzPiVUSVRMRSU8L2gzPjxwPiVERVNDUklQVElPTjwvcD48cD5GaW5kIG91dCBtb3JlIDxhIGhyZWY9XCIlV0lLSVVSTCVcIj5oZXJlPC9hPiBhdCBXaWtpcGVkaWEgb3IgPGEgaHJlZj1cIiVXRUJVUkwlXCI+aGVyZTwvYT4gYXQgdGhlIGhvbWUgcGFnZS48L3A+JztcblxuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogYmFzZXVybCArICc/YWN0aW9uPW9wZW5zZWFyY2gmc2VhcmNoPScgKyBzZWxmLm5hbWUoKSArICcmZm9ybWF0PWpzb24nLFxuICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgZGF0YVR5cGU6ICdqc29ucCdcbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgLy8gVE9ETzogTG9vayB1cCBmb3JtYXQgdHlwZSBhbmQgZW50ZXIgaXQgdG8gcmVwbGFjZSB0aGUgVGl0bGUsIGRlc2NyaXB0aW9uLCB3aWtpdXJsLCBhbmQgd2Vic2l0ZSB1cmxcbiAgICAgICAgICAgIC8vIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoJyVUSVRMRSUnLCApO1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgnJVdFQlVSTCUnLCBzZWxmLndlYnNpdGUoKSk7XG4gICAgICAgICAgICBpZiAoc2VsZi53aWtpKCkgIT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZGF0YVszXS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBpZiggZGF0YVszXVtpXSA9PSBzZWxmLndpa2koKSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgnJURFU0NSSVBUSU9OJScsIGRhdGFbMl1baV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgnJVdJS0lVUkwlJywgc2VsZi53aWtpKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi53aWtpRGlzcGxheShjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZmFpbGVkID0gJzxoMz4lTkFNRSU8L2gzPjxwPkNvdWxkIG5vdCBmaW5kIGFueSBkYXRhIGZyb20gV2lraXBlZGlhIGZyb20gdGhpcyBsb2NhdGlvbiBidXQgeW91IGNhbiBnbyB0byB0aGUgd2Vic2l0ZSA8YSBocmVmPVwiJVdFQlVSTCVcIj5oZXJlPC9hPjwvcD4nO1xuICAgICAgICAgICAgICAgIGZhaWxlZCA9IGZhaWxlZC5yZXBsYWNlKCclTkFNRSUnLCBzZWxmLm5hbWUoKSk7XG4gICAgICAgICAgICAgICAgZmFpbGVkID0gZmFpbGVkLnJlcGxhY2UoJyVXRUJVUkwlJywgc2VsZi53ZWJzaXRlKCkpO1xuICAgICAgICAgICAgICAgIHNlbGYud2lraURpc3BsYXkoZmFpbGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBmYWlsZWQgPSAnPGgzPiVOQU1FJTwvaDM+PHA+Q291bGQgbm90IGZpbmQgYW55IGRhdGEgZnJvbSBXaWtpcGVkaWEgZnJvbSB0aGlzIGxvY2F0aW9uIGJ1dCB5b3UgY2FuIGdvIHRvIHRoZSB3ZWJzaXRlIDxhIGhyZWY9XCIlV0VCVVJMJVwiPmhlcmU8L2E+PC9wPic7XG4gICAgICAgICAgICBmYWlsZWQgPSBmYWlsZWQucmVwbGFjZSgnJU5BTUUlJywgc2VsZi5uYW1lKCkpO1xuICAgICAgICAgICAgZmFpbGVkID0gZmFpbGVkLnJlcGxhY2UoJyVXRUJVUkwlJywgc2VsZi53ZWJzaXRlKCkpO1xuICAgICAgICAgICAgc2VsZi53aWtpRGlzcGxheShmYWlsZWQpO1xuICAgICAgICB9KVxuICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbXBsZXRlXCIpO1xuICAgICAgICB9KTtcbn07XG5cblxuXG4vKiBUT0RPOiBDb250YWluZXIgb2YgTWFya2VycyB0byBmaWx0ZXIgdGhyb3VnaCB0aGUgbWFya2VycyAqL1xudmFyIExvY0NvbnRhaW5lciA9IGZ1bmN0aW9uICgganNvbkZpbGUgKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubG9jYXRpb25zID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7XG4gICAganNvbkZpbGVbXCJyb21lLWFwcFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSAge1xuICAgICAgICBzZWxmLmxvY2F0aW9ucy5wdXNoKG5ldyBMb2NhdGlvbihpdGVtKSk7XG4gICAgfSk7XG59O1xuTG9jQ29udGFpbmVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LnByb3RvdHlwZSk7XG5Mb2NDb250YWluZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTG9jQ29udGFpbmVyO1xuXG5Mb2NDb250YWluZXIucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uKHdvcmQpIHtcbiAgICB2YXIgdmlzaWJsZUl0ZW1zID0gW107XG4gICAgdGhpcy5sb2NhdGlvbnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLnZpc2libGUpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnNlYXJjaCh3b3JkLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgICAgICAgdmlzaWJsZS5wdXNoKGl0ZW0ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0pO1xuICAgIHJldHVybiB2aXNpYmxlSXRlbXM7IC8vIFJFVFVSTiBhcnJheSBvZiB2aXNpYmxlIGl0ZW1zIHRvIGRyb3AgZG93biBib3guLi5cbn07XG5cbkxvY0NvbnRhaW5lci5wcm90b3R5cGUuc2V0VHlwZVZpc2libGUgPSBmdW5jdGlvbiggdHlwZSApIHtcbiAgICB0aGlzLmxvY2F0aW9ucygpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYoIGl0ZW0udHlwZSgpICE9IHR5cGUgKSB7XG4gICAgICAgICAgICBpdGVtLnZpc2libGUoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbS52aXNpYmxlKHRydWUpO1xuICAgICAgICAgICAgLy8gTWFrZSB0aGlzIGNoYW5nZSBtYXJrZXIgdmlzaWJpbGl0eSByYXRoZXIgdGhhbiBpdGVtXG4gICAgICAgIH1cblxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiU2V0VHlwZVZpc2libGUgXCIgKyBTdHJpbmcodHlwZSkpO1xufTtcblxuTG9jQ29udGFpbmVyLnByb3RvdHlwZS5hbGxWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubG9jYXRpb25zKCkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpdGVtLnZpc2libGUodHJ1ZSk7XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coXCJBbGwgVmlzaWJsZVwiKTtcbn07XG5mdW5jdGlvbiBmaXhlcmlvX3VwZGF0ZShjdXJyZW5jaWVzKSB7XG4gICAgalF1ZXJ5LmdldEpTT04oJ2h0dHA6Ly9hcGkuZml4ZXIuaW8vbGF0ZXN0JywgZnVuY3Rpb24oZGF0YSkgeyAvLyBFVVIgaXMgdGhlIGRlZmF1bHQgYmFzZS4gU2VlIGZpeGVyLmlvXG4gICAgICAgIHZhciBpZFRlbXBsYXRlID0gXCIjJUNVUlJFTkNZJS1kYXRhXCI7XG4gICAgICAgIHZhciB0ZW1wSWQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VycmVuY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGVtcElkID0gaWRUZW1wbGF0ZS5yZXBsYWNlKFwiJUNVUlJFTkNZJVwiLCBjdXJyZW5jaWVzW2ldKTtcbiAgICAgICAgICAgICQodGVtcElkKS50ZXh0KGRhdGEucmF0ZXNbY3VycmVuY2llc1tpXV0pO1xuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoZml4ZXJpb191cGRhdGUsIDMwMDAwMCwgY3VycmVuY2llcyk7XG4gICAgfSk7XG59XG4vKkRPTkU6IEZpeGVyLmlvIEN1cnJlbmN5IENvbnZlcnNpb24qL1xuZnVuY3Rpb24gZml4ZXJpb19hcGkoY3VycmVuY2llcykge1xuICAgIGpRdWVyeS5nZXRKU09OKCdodHRwOi8vYXBpLmZpeGVyLmlvL2xhdGVzdCcsIGZ1bmN0aW9uKGRhdGEpIHsgLy8gRVVSIGlzIHRoZSBkZWZhdWx0IGJhc2UuIFNlZSBmaXhlci5pb1xuICAgICAgICB2YXIgY3VycmVuY3kgPSAkKCcjY3VycmVuY2llc1RhcmdldCcpO1xuICAgICAgICB2YXIgdGVtcGxhdGUgPSBcIjx0cj48dGQ+JUNVUlJFTkNZJTwvdGQ+PHRkIGlkPVxcXCIlQ1VSUkVOQ1klLWRhdGFcXFwiPjwvdGQ+PC90cj5cIjtcbiAgICAgICAgdmFyIHRlbXBsYXRlMSA9IFwiPHRyPjx0ZD4lQ1VSUkVOQ1klPC90ZD48dGQ+JUFNT1VOVCU8L3RkPjwvdHI+XCI7XG4gICAgICAgIHZhciBpZFRlbXBsYXRlID0gXCIjJUNVUlJFTkNZJS1kYXRhXCI7XG4gICAgICAgIHZhciB0ZW1wID0gdGVtcGxhdGUxLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGRhdGEuYmFzZSk7XG4gICAgICAgIHZhciB0ZW1wSWQgPSBpZFRlbXBsYXRlO1xuICAgICAgICB0ZW1wID0gdGVtcC5yZXBsYWNlKFwiJUFNT1VOVCVcIiwgXCIxLjAwXCIpO1xuICAgICAgICBjdXJyZW5jeS5hcHBlbmQodGVtcCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VycmVuY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGVtcCA9IHRlbXBsYXRlLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGN1cnJlbmNpZXNbaV0pO1xuICAgICAgICAgICAgdGVtcCA9IHRlbXAucmVwbGFjZShcIiVDVVJSRU5DWSVcIiwgY3VycmVuY2llc1tpXSk7XG4gICAgICAgICAgICB0ZW1wSWQgPSBpZFRlbXBsYXRlLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGN1cnJlbmNpZXNbaV0pO1xuICAgICAgICAgICAgY3VycmVuY3kuYXBwZW5kKHRlbXApO1xuICAgICAgICAgICAgJCh0ZW1wSWQpLnRleHQoZGF0YS5yYXRlc1tjdXJyZW5jaWVzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmaXhlcmlvX3VwZGF0ZSwgMzAwMDAwLCBjdXJyZW5jaWVzKTtcbiAgICB9KTtcbn1cblxuLypUT0RPOiBtYXJrZXIgZGF0YSAqL1xudmFyIGxvY2F0aW9uRGF0YSA9IHtcbiAgICBcInJvbWUtYXBwXCI6IFsge1xuICAgIFwibmFtZVwiOiBcIkNvbG9zc2V1bVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJQaWF6emEgZGVsIENvbG9zc2VvLCBSb21lLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL3RoZS1jb2xvc3NldW0uY2ZtXCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29sb3NzZXVtXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiZ2xhZGlhdG9yXCIsXG4gICAgICAgIFwiZmlnaHRcIixcbiAgICAgICAgXCJyaW5nXCIsXG4gICAgICAgIFwiZ2FtZXNcIixcbiAgICAgICAgXCJzcG9ydFwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJQYW50aGVvbiwgUm9tZVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJQaWF6emEgZGVsbGEgUm90b25kYSBSb21lLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LnR1cmlzbW9yb21hLml0L2Nvc2EtZmFyZS9wYW50aGVvbj9sYW5nPWVuXCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFudGhlb24sX1JvbWVcIixcbiAgICBcInR5cGVcIjogMCxcbiAgICBcImtleXdvcmRzXCI6IFtcbiAgICAgICAgXCJjaHVyY2hcIixcbiAgICAgICAgXCJkb21lXCIsXG4gICAgICAgIFwidGVtcGxlXCJcbiAgICBdXG4gICAgfSwge1xuICAgIFwibmFtZVwiOiBcIlN0LiBQZXRlcidzIEJhc2lsaWNhXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlBpYXp6YSBTYW4gUGlldHJvLCAwMDEyMCBDaXR0w6AgZGVsIFZhdGljYW5vLCBWYXRpY2FuIENpdHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy52YXRpY2Fuc3RhdGUudmEvY29udGVudC92YXRpY2Fuc3RhdGUvZW4vbW9udW1lbnRpL2Jhc2lsaWNhLWRpLXMtcGlldHJvLmh0bWxcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdC5fUGV0ZXIlMjdzX0Jhc2lsaWNhXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiY2h1cmNoXCIsXG4gICAgICAgIFwiYmFzaWxpY2FcIixcbiAgICAgICAgXCJ2YXRpY2FuXCIsXG4gICAgICAgIFwicG9wZVwiLFxuICAgICAgICBcInBldGVyXCIsXG4gICAgICAgIFwic2FpbnRcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiUHlyYW1pZCBvZiBDZXN0aWFcIixcbiAgICBcImFkZHJlc3NcIjogW1wiVmlhIFJhZmZhZWxlIFBlcnNpY2hldHRpLCAwMDE1MyBSb21hLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL2hlcml0YWdlLmNmbT9pZD01OVwiLFxuICAgIFwid2lraVwiOiBcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1B5cmFtaWRfb2ZfQ2VzdGl1c1wiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInB5cmFtaWRcIixcbiAgICAgICAgXCJnYWl1c1wiLFxuICAgICAgICBcImNlc3RpdXNcIixcbiAgICAgICAgXCJ0b21iXCIsXG4gICAgICAgIFwicnVpbnNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiVW5kZXJncm91bmQgQmFzaWxpY2Egb2YgUG9ydGEgTWFnZ2lvcmVcIixcbiAgICBcImFkZHJlc3NcIjogW1wiUGlhenphbGUgTGFiaWNhbm8gYW5nb2xvIHZpYSBQcmVuZXN0aW5hLCBWaWEgUHJlbmVzdGluYSwgUm9tYSwgSXRhbHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL2FyY2hlb3JvbWEuYmVuaWN1bHR1cmFsaS5pdC9lbi9hcmNoYWVvbG9naWNhbC1zaXRlL3VuZGVyZ3JvdW5kLWJhc2lsaWNhLW5lYXItcG9ydGEtbWFnZ2lvcmVcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VbmRlcmdyb3VuZF9iYXNpbGljYV9vZl9Qb3J0YV9NYWdnaW9yZVwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcImJhc2lsaWNhXCIsXG4gICAgICAgIFwidW5kZXJncm91bmRcIixcbiAgICAgICAgXCJuZW9weXRoYWdvcmVhbnNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiUGFsYXp6byBEZWxsZSBFc3Bvc2l6aW9uaVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJWaWEgTmF6aW9uYWxlLCAxOTQsIDAwMTg0IFJvbWEsIEl0YWx5XCJdLFxuICAgIFwid2Vic2l0ZVwiOiBcImh0dHA6Ly9lbmdsaXNoLnBhbGF6em9lc3Bvc2l6aW9uaS5pdC9Ib21lLmFzcHhcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYWxhenpvX2RlbGxlX0VzcG9zaXppb25pXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiZXhoaWJpdGlvblwiLFxuICAgICAgICBcImhhbGxcIixcbiAgICAgICAgXCJjdWx0dXJhbFwiLFxuICAgICAgICBcImNlbnRlclwiLFxuICAgICAgICBcIm11c2V1bVwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJQYWxhdGluZSBIaWxsXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlZpYSBkZWxsYSBTYWxhcmEgVmVjY2hpYSwgNS82LCBSb21hLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL2hlcml0YWdlLmNmbT9pZD00XCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFsYXRpbmVfSGlsbFwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInBhbGF0aW5lXCIsXG4gICAgICAgIFwiaGlsbFwiLFxuICAgICAgICBcImZvcnVtXCIsXG4gICAgICAgIFwicnVpbnNcIixcbiAgICAgICAgXCJhbmNpZW50XCIsXG4gICAgICAgIFwicm9tZVwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJUb3VyaXN0IEluZm9ybWF0aW9uIENlbnRlcnNcIixcbiAgICBcImFkZHJlc3NcIjogW1xuICAgICAgICBcIlZpYSBHaW92YW5uaSBHaW9saXR0aSAzNCwgUm9tYSwgSXRhbHlcIixcbiAgICAgICAgXCJWaWEgZGkgU2FuIEJhc2lsaW8gNTEsIFJvbWEsIEl0YWx5XCIsXG4gICAgICAgIFwiUGFsYXp6byBkZWxsZSBFc3Bvc2l6aW9uaSwgUm9tYSwgSXRhbHlcIixcbiAgICAgICAgXCJWaWEgZGVpIEZvcmkgSW1wZXJpYWxpLCBSb21hLCBJdGFseVwiXG4gICAgXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LnR1cmlzbW9yb21hLml0L2luZm9fdmlhZ2dpby9waXRcIixcbiAgICBcIndpa2lcIjogXCJub25lXCIsXG4gICAgXCJ0eXBlXCI6IDEsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiaW5mb3JtYXRpb25cIixcbiAgICAgICAgXCJjZW50ZXJcIixcbiAgICAgICAgXCJwaXRcIixcbiAgICAgICAgXCJwb2ludFwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjpcIkxlb25hcmRvIGRhIFZpbmNp4oCTRml1bWljaW5vIEFpcnBvcnRcIixcbiAgICBcImFkZHJlc3NcIjpbXCJWaWEgZGVsbCcgQWVyb3BvcnRvIGRpIEZpdW1pY2lubywgMzIwLCAwMDA1NCBGaXVtaWNpbm8gUk0sIEl0YWx5XCJdLFxuICAgIFwid2Vic2l0ZVwiOlwiaHR0cDovL3d3dy5hZHIuaXQvZml1bWljaW5vXCIsXG4gICAgXCJ3aWtpXCI6XCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MZW9uYXJkb19kYV9WaW5jaSVFMiU4MCU5M0ZpdW1pY2lub19BaXJwb3J0XCIsXG4gICAgXCJ0eXBlXCI6IDMsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiYWlycG9ydFwiLFxuICAgICAgICBcInJ5YW5haXJcIixcbiAgICAgICAgXCJmaXVtaWNpbm9cIixcbiAgICAgICAgXCJuZW9zXCIsXG4gICAgICAgIFwiYWxpdGFsaWFcIixcbiAgICAgICAgXCJhaXJwbGFuZXNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6XCJUZXJtaW5pIFN0YXRpb25cIixcbiAgICBcImFkZHJlc3NcIjogW1wiUm9tYSBUZXJtaW5pLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjpcImh0dHA6Ly93d3cudHJlbml0YWxpYS5jb20vdGNvbS1lblwiLFxuICAgIFwidHlwZVwiOiAzLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInRyYWluc1wiLFxuICAgICAgICBcInN0YXRpb25cIixcbiAgICAgICAgXCJjaG9vXCJcbiAgICBdXG4gICAgfSwge1xuICAgIFwibmFtZVwiOiBcIlRyZXZpIEZvdW50YWluXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlBpYXp6YSBkaSBUcmV2aSwgMDAxODcgUm9tYSwgSXRhbHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy50cmV2aWZvdW50YWluLm5ldC9cIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UcmV2aV9Gb3VudGFpblwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInRyZXZpXCIsXG4gICAgICAgIFwiZm91bnRhaW5cIixcbiAgICAgICAgXCJ3aXNoXCIsXG4gICAgICAgIFwic2FsdmlcIixcbiAgICAgICAgXCJicmFjY2lcIlxuICAgIF1cbiAgICB9XG4gIF1cbn07XG5cbmZ1bmN0aW9uIENyZWF0ZU1hcmtlcihwbGFjZSwgbWFwKSB7XG4gICAgdmFyIG1hcmtlciwgaW5mb3dpbmRvdztcbiAgICBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgIHBvc2l0aW9uOiB7bGF0OiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSwgbG5nOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKX0sXG4gICAgICAgIHRpdGxlOiBwbGFjZS5uYW1lXG4gICAgfSk7XG59XG5cbi8qVE9ETzogUGFydCBvZiB0aGUgYXBwIHRoYXQgc3RhcnRzIGV2ZXJ5dGhpbmcqL1xuZnVuY3Rpb24gTWFpblZpZXdNb2RlbChqc29uRmlsZSkge1xuICAgIC8vIFRPRE86IENvbm5lY3QgZXZlcnl0aGluZy4uLi5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5jb250YWluZXIgPSBuZXcgTG9jQ29udGFpbmVyKGpzb25GaWxlKTtcbiAgICBzZWxmLmN1cnJlbmNpZXMgPSBbJ1VTRCcsICdDSEYnLCAnR0JQJywgJ0FVRCcsICdDQUQnLCAnQ1pLJ107XG5cbiAgICAvKlRPRE86IFZpZXcgcGFydCBmb3IgdGhlIE1hcCovXG4gICAgc2VsZi5Sb21lID0ge2xhdDogNDEuOSwgbG5nOiAxMi41fTtcbiAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JvbWVNYXAnKSwge1xuICAgICAgICB6b29tOiAxMixcbiAgICAgICAgY2VudGVyOiBzZWxmLlJvbWVcbiAgICB9KTtcbiAgICBzZWxmLnBsYWNlU2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuUGxhY2VzU2VydmljZShzZWxmLm1hcCk7XG5cbiAgICAvKlRPRE86IFZpZXcgcGFydCBmb3IgbWFya2VyKi9cblxuXG5cbn1cbmZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgdmFyIG1haW4gPSBuZXcgTWFpblZpZXdNb2RlbChsb2NhdGlvbkRhdGEpO1xuICAgIGZpeGVyaW9fYXBpKG1haW4uY3VycmVuY2llcyk7XG4gICAga28uYXBwbHlCaW5kaW5ncyhtYWluKTtcbiAgICBtYWluLmNvbnRhaW5lci5hbGxWaXNpYmxlKCk7XG59XG5mdW5jdGlvbiBpbml0KCkge1xuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHdpbmRvdywgXCJsb2FkXCIsIGluaXRpYWxpemUpO1xuICAgIGNvbnNvbGUubG9nKFwiUnVucyBvbiByZWFkeSFcIik7XG59IiwidmFyIGxvY2F0aW9uRGF0YSA9IHtcbiAgICBcInJvbWUtYXBwXCI6IFsge1xuICAgIFwibmFtZVwiOiBcIkNvbG9zc2V1bVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJQaWF6emEgZGVsIENvbG9zc2VvLCBSb21lLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL3RoZS1jb2xvc3NldW0uY2ZtXCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29sb3NzZXVtXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiZ2xhZGlhdG9yXCIsXG4gICAgICAgIFwiZmlnaHRcIixcbiAgICAgICAgXCJyaW5nXCIsXG4gICAgICAgIFwiZ2FtZXNcIixcbiAgICAgICAgXCJzcG9ydFwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJQYW50aGVvbiwgUm9tZVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJQaWF6emEgZGVsbGEgUm90b25kYSBSb21lLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LnR1cmlzbW9yb21hLml0L2Nvc2EtZmFyZS9wYW50aGVvbj9sYW5nPWVuXCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFudGhlb24sX1JvbWVcIixcbiAgICBcInR5cGVcIjogMCxcbiAgICBcImtleXdvcmRzXCI6IFtcbiAgICAgICAgXCJjaHVyY2hcIixcbiAgICAgICAgXCJkb21lXCIsXG4gICAgICAgIFwidGVtcGxlXCJcbiAgICBdXG4gICAgfSwge1xuICAgIFwibmFtZVwiOiBcIlN0LiBQZXRlcidzIEJhc2lsaWNhXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlBpYXp6YSBTYW4gUGlldHJvLCAwMDEyMCBDaXR0w6AgZGVsIFZhdGljYW5vLCBWYXRpY2FuIENpdHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy52YXRpY2Fuc3RhdGUudmEvY29udGVudC92YXRpY2Fuc3RhdGUvZW4vbW9udW1lbnRpL2Jhc2lsaWNhLWRpLXMtcGlldHJvLmh0bWxcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdC5fUGV0ZXIlMjdzX0Jhc2lsaWNhXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiY2h1cmNoXCIsXG4gICAgICAgIFwiYmFzaWxpY2FcIixcbiAgICAgICAgXCJ2YXRpY2FuXCIsXG4gICAgICAgIFwicG9wZVwiLFxuICAgICAgICBcInBldGVyXCIsXG4gICAgICAgIFwic2FpbnRcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiUHlyYW1pZCBvZiBDZXN0aWFcIixcbiAgICBcImFkZHJlc3NcIjogW1wiVmlhIFJhZmZhZWxlIFBlcnNpY2hldHRpLCAwMDE1MyBSb21hLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL2hlcml0YWdlLmNmbT9pZD01OVwiLFxuICAgIFwid2lraVwiOiBcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1B5cmFtaWRfb2ZfQ2VzdGl1c1wiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInB5cmFtaWRcIixcbiAgICAgICAgXCJnYWl1c1wiLFxuICAgICAgICBcImNlc3RpdXNcIixcbiAgICAgICAgXCJ0b21iXCIsXG4gICAgICAgIFwicnVpbnNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiVW5kZXJncm91bmQgQmFzaWxpY2Egb2YgUG9ydGEgTWFnZ2lvcmVcIixcbiAgICBcImFkZHJlc3NcIjogW1wiUGlhenphbGUgTGFiaWNhbm8gYW5nb2xvIHZpYSBQcmVuZXN0aW5hLCBWaWEgUHJlbmVzdGluYSwgUm9tYSwgSXRhbHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL2FyY2hlb3JvbWEuYmVuaWN1bHR1cmFsaS5pdC9lbi9hcmNoYWVvbG9naWNhbC1zaXRlL3VuZGVyZ3JvdW5kLWJhc2lsaWNhLW5lYXItcG9ydGEtbWFnZ2lvcmVcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VbmRlcmdyb3VuZF9iYXNpbGljYV9vZl9Qb3J0YV9NYWdnaW9yZVwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcImJhc2lsaWNhXCIsXG4gICAgICAgIFwidW5kZXJncm91bmRcIixcbiAgICAgICAgXCJuZW9weXRoYWdvcmVhbnNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiUGFsYXp6byBEZWxsZSBFc3Bvc2l6aW9uaVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJWaWEgTmF6aW9uYWxlLCAxOTQsIDAwMTg0IFJvbWEsIEl0YWx5XCJdLFxuICAgIFwid2Vic2l0ZVwiOiBcImh0dHA6Ly9lbmdsaXNoLnBhbGF6em9lc3Bvc2l6aW9uaS5pdC9Ib21lLmFzcHhcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYWxhenpvX2RlbGxlX0VzcG9zaXppb25pXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiZXhoaWJpdGlvblwiLFxuICAgICAgICBcImhhbGxcIixcbiAgICAgICAgXCJjdWx0dXJhbFwiLFxuICAgICAgICBcImNlbnRlclwiLFxuICAgICAgICBcIm11c2V1bVwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJQYWxhdGluZSBIaWxsXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlZpYSBkZWxsYSBTYWxhcmEgVmVjY2hpYSwgNS82LCBSb21hLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL2hlcml0YWdlLmNmbT9pZD00XCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFsYXRpbmVfSGlsbFwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInBhbGF0aW5lXCIsXG4gICAgICAgIFwiaGlsbFwiLFxuICAgICAgICBcImZvcnVtXCIsXG4gICAgICAgIFwicnVpbnNcIixcbiAgICAgICAgXCJhbmNpZW50XCIsXG4gICAgICAgIFwicm9tZVwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJUb3VyaXN0IEluZm9ybWF0aW9uIENlbnRlcnNcIixcbiAgICBcImFkZHJlc3NcIjogW1xuICAgICAgICBcIlZpYSBHaW92YW5uaSBHaW9saXR0aSAzNCwgUm9tYSwgSXRhbHlcIixcbiAgICAgICAgXCJWaWEgZGkgU2FuIEJhc2lsaW8gNTEsIFJvbWEsIEl0YWx5XCIsXG4gICAgICAgIFwiUGFsYXp6byBkZWxsZSBFc3Bvc2l6aW9uaSwgUm9tYSwgSXRhbHlcIixcbiAgICAgICAgXCJWaWEgZGVpIEZvcmkgSW1wZXJpYWxpLCBSb21hLCBJdGFseVwiXG4gICAgXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LnR1cmlzbW9yb21hLml0L2luZm9fdmlhZ2dpby9waXRcIixcbiAgICBcIndpa2lcIjogXCJub25lXCIsXG4gICAgXCJ0eXBlXCI6IDEsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiaW5mb3JtYXRpb25cIixcbiAgICAgICAgXCJjZW50ZXJcIixcbiAgICAgICAgXCJwaXRcIixcbiAgICAgICAgXCJwb2ludFwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjpcIkxlb25hcmRvIGRhIFZpbmNp4oCTRml1bWljaW5vIEFpcnBvcnRcIixcbiAgICBcImFkZHJlc3NcIjpbXCJWaWEgZGVsbCcgQWVyb3BvcnRvIGRpIEZpdW1pY2lubywgMzIwLCAwMDA1NCBGaXVtaWNpbm8gUk0sIEl0YWx5XCJdLFxuICAgIFwid2Vic2l0ZVwiOlwiaHR0cDovL3d3dy5hZHIuaXQvZml1bWljaW5vXCIsXG4gICAgXCJ3aWtpXCI6XCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MZW9uYXJkb19kYV9WaW5jaSVFMiU4MCU5M0ZpdW1pY2lub19BaXJwb3J0XCIsXG4gICAgXCJ0eXBlXCI6IDMsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiYWlycG9ydFwiLFxuICAgICAgICBcInJ5YW5haXJcIixcbiAgICAgICAgXCJmaXVtaWNpbm9cIixcbiAgICAgICAgXCJuZW9zXCIsXG4gICAgICAgIFwiYWxpdGFsaWFcIixcbiAgICAgICAgXCJhaXJwbGFuZXNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6XCJUZXJtaW5pIFN0YXRpb25cIixcbiAgICBcImFkZHJlc3NcIjogW1wiUm9tYSBUZXJtaW5pLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjpcImh0dHA6Ly93d3cudHJlbml0YWxpYS5jb20vdGNvbS1lblwiLFxuICAgIFwidHlwZVwiOiAzLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInRyYWluc1wiLFxuICAgICAgICBcInN0YXRpb25cIixcbiAgICAgICAgXCJjaG9vXCJcbiAgICBdXG4gICAgfSwge1xuICAgIFwibmFtZVwiOiBcIlRyZXZpIEZvdW50YWluXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlBpYXp6YSBkaSBUcmV2aSwgMDAxODcgUm9tYSwgSXRhbHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy50cmV2aWZvdW50YWluLm5ldC9cIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UcmV2aV9Gb3VudGFpblwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInRyZXZpXCIsXG4gICAgICAgIFwiZm91bnRhaW5cIixcbiAgICAgICAgXCJ3aXNoXCIsXG4gICAgICAgIFwic2FsdmlcIixcbiAgICAgICAgXCJicmFjY2lcIlxuICAgIF1cbiAgICB9XG4gIF1cbn07XG5cblxuXG5cbmZ1bmN0aW9uIGZpeGVyaW9fdXBkYXRlKGN1cnJlbmNpZXMpIHtcbiAgICBqUXVlcnkuZ2V0SlNPTignaHR0cDovL2FwaS5maXhlci5pby9sYXRlc3QnLCBmdW5jdGlvbihkYXRhKSB7IC8vIEVVUiBpcyB0aGUgZGVmYXVsdCBiYXNlLiBTZWUgZml4ZXIuaW9cbiAgICAgICAgdmFyIGlkVGVtcGxhdGUgPSBcIiMlQ1VSUkVOQ1klLWRhdGFcIjtcbiAgICAgICAgdmFyIHRlbXBJZDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJyZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0ZW1wSWQgPSBpZFRlbXBsYXRlLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGN1cnJlbmNpZXNbaV0pO1xuICAgICAgICAgICAgJCh0ZW1wSWQpLnRleHQoZGF0YS5yYXRlc1tjdXJyZW5jaWVzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmaXhlcmlvX3VwZGF0ZSwgMzAwMDAwLCBjdXJyZW5jaWVzKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZml4ZXJpb19hcGkoY3VycmVuY2llcykge1xuICAgIGpRdWVyeS5nZXRKU09OKCdodHRwOi8vYXBpLmZpeGVyLmlvL2xhdGVzdCcsIGZ1bmN0aW9uKGRhdGEpIHsgLy8gRVVSIGlzIHRoZSBkZWZhdWx0IGJhc2UuIFNlZSBmaXhlci5pb1xuICAgICAgICB2YXIgY3VycmVuY3kgPSAkKCcjY3VycmVuY2llc1RhcmdldCcpO1xuICAgICAgICB2YXIgdGVtcGxhdGUgPSBcIjx0cj48dGQ+JUNVUlJFTkNZJTwvdGQ+PHRkIGlkPVxcXCIlQ1VSUkVOQ1klLWRhdGFcXFwiPjwvdGQ+PC90cj5cIjtcbiAgICAgICAgdmFyIHRlbXBsYXRlMSA9IFwiPHRyPjx0ZD4lQ1VSUkVOQ1klPC90ZD48dGQ+JUFNT1VOVCU8L3RkPjwvdHI+XCI7XG4gICAgICAgIHZhciBpZFRlbXBsYXRlID0gXCIjJUNVUlJFTkNZJS1kYXRhXCI7XG4gICAgICAgIHZhciB0ZW1wID0gdGVtcGxhdGUxLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGRhdGEuYmFzZSk7XG4gICAgICAgIHZhciB0ZW1wSWQgPSBpZFRlbXBsYXRlO1xuICAgICAgICB0ZW1wID0gdGVtcC5yZXBsYWNlKFwiJUFNT1VOVCVcIiwgXCIxLjAwXCIpO1xuICAgICAgICBjdXJyZW5jeS5hcHBlbmQodGVtcCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VycmVuY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGVtcCA9IHRlbXBsYXRlLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGN1cnJlbmNpZXNbaV0pO1xuICAgICAgICAgICAgdGVtcCA9IHRlbXAucmVwbGFjZShcIiVDVVJSRU5DWSVcIiwgY3VycmVuY2llc1tpXSk7XG4gICAgICAgICAgICB0ZW1wSWQgPSBpZFRlbXBsYXRlLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGN1cnJlbmNpZXNbaV0pO1xuICAgICAgICAgICAgY3VycmVuY3kuYXBwZW5kKHRlbXApO1xuICAgICAgICAgICAgJCh0ZW1wSWQpLnRleHQoZGF0YS5yYXRlc1tjdXJyZW5jaWVzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmaXhlcmlvX3VwZGF0ZSwgMzAwMDAwLCBjdXJyZW5jaWVzKTtcbiAgICB9KTtcbn1cblxudmFyIExvY2F0aW9uID0gZnVuY3Rpb24oIGluaXREYXRhICkge1xuICAgIHRoaXMubmFtZSA9IGtvLm9ic2VydmFibGUoIGluaXREYXRhLm5hbWUgfHwgJycgKTtcbiAgICB0aGlzLmFkZHJlc3MgPSBrby5vYnNlcnZhYmxlQXJyYXkoIGluaXREYXRhLmFkZHJlc3MgfHwgW1wiXCJdICk7XG4gICAgdGhpcy53aWtpID0ga28ub2JzZXJ2YWJsZSggaW5pdERhdGEud2lraSB8fCAnJyApO1xuICAgIHRoaXMudHlwZSA9IGtvLm9ic2VydmFibGUoIGluaXREYXRhLnR5cGUgfHwgNSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogMCAtIEhpc3RvcmljYWwgTWFya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxIC0gSW5mb3JtYXRpb24gQ2VudGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyIC0gUmVzdGF1cmFudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMyAtIFRyYW5zcG9ydGF0aW9uIEh1YiBidXMvdHJhaW4vYWlycG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNCAtIENodXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNSAtIE90aGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICB0aGlzLndlYnNpdGUgPSBrby5vYnNlcnZhYmxlKCBpbml0RGF0YS53ZWJzaXRlIHx8ICcnICk7XG4gICAgdGhpcy5rZXl3b3JkcyA9IGtvLm9ic2VydmFibGVBcnJheSggaW5pdERhdGEua2V5d29yZHMgfHwgW10pO1xuICAgIHRoaXMudmlzaWJsZSA9IGtvLm9ic2VydmFibGUodHJ1ZSk7XG4gICAgdGhpcy5tYXJrZXIgPSBrby5vYnNlcnZhYmxlKCk7IC8vIFRPRE86IHdpbGwgYmUgTWFya2VyIG9iamVjdFxuICAgIHRoaXMud2lraURpc3BsYXkgPSBrby5vYnNlcnZhYmxlKFwiXCIpO1xufTtcbkxvY2F0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LnByb3RvdHlwZSk7XG5Mb2NhdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMb2NhdGlvbjtcblxuTG9jYXRpb24ucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uKHBhcnRpYWwpIHtcbiAgICBpZiAodGhpcy5uYW1lKCkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwYXJ0aWFsKSkge1xuICAgICAgICB0aGlzLnZpc2libGUodHJ1ZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmtleXdvcmRzKCkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmKHRoaXMua2V5d29yZHMoKVtpXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBhcnRpYWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aXNpYmxlKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbi8vIFNldHMgd2lraURpc3BsYXkgaW4gYWRkaXRpb24gdG8gd2Vic2l0ZSBVUkxcbkxvY2F0aW9uLnByb3RvdHlwZS53aWtpR2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBiYXNldXJsID0gJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93L2FwaS5waHAnO1xuICAgIHZhciBjb250ZW50ID0gJzxoMz4lVElUTEUlPC9oMz48cD4lREVTQ1JJUFRJT048L3A+PHA+RmluZCBvdXQgbW9yZSA8YSBocmVmPVwiJVdJS0lVUkwlXCI+aGVyZTwvYT4gYXQgV2lraXBlZGlhIG9yIDxhIGhyZWY9XCIlV0VCVVJMJVwiPmhlcmU8L2E+IGF0IHRoZSBob21lIHBhZ2UuPC9wPic7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6IGJhc2V1cmwgKyAnP2FjdGlvbj1vcGVuc2VhcmNoJnNlYXJjaD0nICsgc2VsZi5uYW1lKCkgKyAnJmZvcm1hdD1qc29uJyxcbiAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbnAnXG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IExvb2sgdXAgZm9ybWF0IHR5cGUgYW5kIGVudGVyIGl0IHRvIHJlcGxhY2UgdGhlIFRpdGxlLCBkZXNjcmlwdGlvbiwgd2lraXVybCwgYW5kIHdlYnNpdGUgdXJsXG4gICAgICAgICAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKCclVElUTEUlJywgKTtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoJyVXRUJVUkwlJywgc2VsZi53ZWJzaXRlKCkpO1xuICAgICAgICAgICAgaWYgKHNlbGYud2lraSgpICE9IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGRhdGFbM10ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIGRhdGFbM11baV0gPT0gc2VsZi53aWtpKCkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoJyVERVNDUklQVElPTiUnLCBkYXRhWzJdW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoJyVXSUtJVVJMJScsIHNlbGYud2lraSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud2lraURpc3BsYXkoY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZhaWxlZCA9ICc8aDM+JU5BTUUlPC9oMz48cD5Db3VsZCBub3QgZmluZCBhbnkgZGF0YSBmcm9tIFdpa2lwZWRpYSBmcm9tIHRoaXMgbG9jYXRpb24gYnV0IHlvdSBjYW4gZ28gdG8gdGhlIHdlYnNpdGUgPGEgaHJlZj1cIiVXRUJVUkwlXCI+aGVyZTwvYT48L3A+JztcbiAgICAgICAgICAgICAgICBmYWlsZWQgPSBmYWlsZWQucmVwbGFjZSgnJU5BTUUlJywgc2VsZi5uYW1lKCkpO1xuICAgICAgICAgICAgICAgIGZhaWxlZCA9IGZhaWxlZC5yZXBsYWNlKCclV0VCVVJMJScsIHNlbGYud2Vic2l0ZSgpKTtcbiAgICAgICAgICAgICAgICBzZWxmLndpa2lEaXNwbGF5KGZhaWxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZmFpbGVkID0gJzxoMz4lTkFNRSU8L2gzPjxwPkNvdWxkIG5vdCBmaW5kIGFueSBkYXRhIGZyb20gV2lraXBlZGlhIGZyb20gdGhpcyBsb2NhdGlvbiBidXQgeW91IGNhbiBnbyB0byB0aGUgd2Vic2l0ZSA8YSBocmVmPVwiJVdFQlVSTCVcIj5oZXJlPC9hPjwvcD4nO1xuICAgICAgICAgICAgZmFpbGVkID0gZmFpbGVkLnJlcGxhY2UoJyVOQU1FJScsIHNlbGYubmFtZSgpKTtcbiAgICAgICAgICAgIGZhaWxlZCA9IGZhaWxlZC5yZXBsYWNlKCclV0VCVVJMJScsIHNlbGYud2Vic2l0ZSgpKTtcbiAgICAgICAgICAgIHNlbGYud2lraURpc3BsYXkoZmFpbGVkKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmFsd2F5cyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb21wbGV0ZVwiKTtcbiAgICAgICAgfSk7XG59O1xuXG5mdW5jdGlvbiBNYWluVmlld01vZGVsKGpzb25GaWxlKSB7XG4gICAgLy8gVE9ETzogQ29ubmVjdCBldmVyeXRoaW5nLi4uLlxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHNlbGYuY3VycmVuY2llcyA9IFsnVVNEJywgJ0NIRicsICdHQlAnLCAnQVVEJywgJ0NBRCcsICdDWksnXTtcblxuICAgIC8qVE9ETzogVmlldyBwYXJ0IGZvciB0aGUgTWFwKi9cbiAgICBzZWxmLlJvbWUgPSB7bGF0OiA0MS45LCBsbmc6IDEyLjV9O1xuICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9tZU1hcCcpLCB7XG4gICAgICAgIHpvb206IDEyLFxuICAgICAgICBjZW50ZXI6IHNlbGYuUm9tZVxuICAgIH0pO1xuICAgIHNlbGYucGxhY2VTZXJ2aWNlID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5QbGFjZXNTZXJ2aWNlKHNlbGYubWFwKTtcblxuICAgIC8qVE9ETzogVmlldyBwYXJ0IGZvciBtYXJrZXIqL1xuXG5cblxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgIHZhciBtYWluID0gbmV3IE1haW5WaWV3TW9kZWwobG9jYXRpb25EYXRhKTtcbiAgICBmaXhlcmlvX2FwaShtYWluLmN1cnJlbmNpZXMpO1xuICAgIGtvLmFwcGx5QmluZGluZ3MobWFpbik7XG59XG5mdW5jdGlvbiBpbml0RCgpIHtcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcih3aW5kb3csIFwibG9hZFwiLCBpbml0aWFsaXplKTtcbiAgICBjb25zb2xlLmxvZyhcIlJ1bnMgb24gcmVhZHkhXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiQlVUVEhFQURcIik7XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
