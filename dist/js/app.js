function fixerio_update(i){jQuery.getJSON("http://api.fixer.io/latest",function(e){for(var t,a="#%CURRENCY%-data",o=0;o<i.length;o++)t=a.replace("%CURRENCY%",i[o]),$(t).text(e.rates[i[o]]);setTimeout(fixerio_update,3e5,root)})}function fixerio_api(i){jQuery.getJSON("http://api.fixer.io/latest",function(e){var t=$("#currenciesTarget"),a='<tr><td>%CURRENCY%</td><td id="%CURRENCY%-data"></td></tr>',o="<tr><td>%CURRENCY%</td><td>%AMOUNT%</td></tr>",n="#%CURRENCY%-data",r=o.replace("%CURRENCY%",e.base),s=n;r=r.replace("%AMOUNT%","1.00"),t.append(r);for(var l=0;l<i.length;l++)r=a.replace("%CURRENCY%",i[l]),r=r.replace("%CURRENCY%",i[l]),s=n.replace("%CURRENCY%",i[l]),t.append(r),$(s).text(e.rates[i[l]]);setTimeout(fixerio_update,3e5,i)})}function CreateMarker(i,e){var t;t=new google.maps.Marker({map:e,position:{lat:i.geometry.location.lat(),lng:i.geometry.location.lng()},title:i.name})}function MainViewModel(i){var e=this;e.container=new LocContainer(i),e.currencies=["USD","CHF","GBP","AUD","CAD","CZK"],e.Rome={lat:41.9,lng:12.5},e.map=new google.maps.Map(document.getElementById("romeMap"),{zoom:12,center:e.Rome}),e.placeService=new google.maps.places.PlacesService(e.map)}function initialize(){var i=new MainViewModel(locationData);fixerio_api(i.currencies),ko.applyBindings(i),i.container.allVisible()}function init(){google.maps.event.addDomListener(window,"load",initialize),console.log("Runs on ready!")}var Location=function(i){this.name=ko.observable(i.name||""),this.address=ko.observableArray(i.address||[""]),this.wiki=ko.observable(i.wiki||""),this.type=ko.observable(i.type||5),this.website=ko.observable(i.website||""),this.keywords=ko.observableArray(i.keywords||[]),this.visible=ko.observable(!0)};Location.prototype=Object.create(Object.prototype),Location.prototype.constructor=Location,Location.prototype.search=function(i){if(this.name().toLowerCase().includes(i))return!0;for(var e=this.keywords().length-1;e>=0;e--)if(this.keywords()[e].toLowerCase().includes(i))return!0;return this.visible(!1),!1};var LocContainer=function(i){var e=this;e.locations=ko.observableArray(),i["rome-app"].forEach(function(i){e.locations.push(new Location(i))})};LocContainer.prototype=Object.create(Object.prototype),LocContainer.prototype.constructor=LocContainer,LocContainer.prototype.search=function(i){this.locations().forEach(function(e){e.visible&&e.search(i.toLowerCase())})},LocContainer.prototype.setTypeVisible=function(i){this.locations().forEach(function(e){e.type()!=i?e.visible(!1):e.visible(!0)}),console.log("SetTypeVisible "+String(i))},LocContainer.prototype.allVisible=function(){this.locations().forEach(function(i){i.visible(!0)}),console.log("All Visible")};var locationData={"rome-app":[{name:"Colosseum",address:["Piazza del Colosseo, Rome, Italy"],website:"http://www.coopculture.it/en/the-colosseum.cfm",wiki:"https://en.wikipedia.org/wiki/Colosseum",type:0,keywords:["gladiator","fight","ring","games","sport"]},{name:"Pantheon, Rome",address:["Piazza della Rotonda Rome, Italy"],website:"http://www.turismoroma.it/cosa-fare/pantheon?lang=en",wiki:"https://en.wikipedia.org/wiki/Pantheon,_Rome",type:0,keywords:["church","dome","temple"]},{name:"St. Peter's Basilica",address:["Piazza San Pietro, 00120 Città del Vaticano, Vatican City"],website:"http://www.vaticanstate.va/content/vaticanstate/en/monumenti/basilica-di-s-pietro.html",wiki:"https://en.wikipedia.org/wiki/St._Peter%27s_Basilica",type:0,keywords:["church","basilica","vatican","pope","peter","saint"]},{name:"Pyramid of Cestia",address:["Via Raffaele Persichetti, 00153 Roma, Italy"],website:"http://www.coopculture.it/en/heritage.cfm?id=59",wiki:"https://en.wikipedia.org/wiki/Pyramid_of_Cestius",type:0,keywords:["pyramid","gaius","cestius","tomb","ruins"]},{name:"Underground Basilica of Porta Maggiore",address:["Piazzale Labicano angolo via Prenestina, Via Prenestina, Roma, Italy"],website:"http://archeoroma.beniculturali.it/en/archaeological-site/underground-basilica-near-porta-maggiore",wiki:"https://en.wikipedia.org/wiki/Underground_basilica_of_Porta_Maggiore",type:0,keywords:["basilica","underground","neopythagoreans"]},{name:"Palazzo Delle Esposizioni",address:["Via Nazionale, 194, 00184 Roma, Italy"],website:"http://english.palazzoesposizioni.it/Home.aspx",wiki:"https://en.wikipedia.org/wiki/Palazzo_delle_Esposizioni",type:0,keywords:["exhibition","hall","cultural","center","museum"]},{name:"Palatine Hill",address:["Via della Salara Vecchia, 5/6, Roma, Italy"],website:"http://www.coopculture.it/en/heritage.cfm?id=4",wiki:"https://en.wikipedia.org/wiki/Palatine_Hill",type:0,keywords:["palatine","hill","forum","ruins","ancient","rome"]},{name:"Tourist Information Centers",address:["Via Giovanni Giolitti 34, Roma, Italy","Via di San Basilio 51, Roma, Italy","Palazzo delle Esposizioni, Roma, Italy","Via dei Fori Imperiali, Roma, Italy"],website:"http://www.turismoroma.it/info_viaggio/pit",wiki:"none",type:1,keywords:["information","center","pit","point"]},{name:"Leonardo da Vinci–Fiumicino Airport",address:["Via dell' Aeroporto di Fiumicino, 320, 00054 Fiumicino RM, Italy"],website:"http://www.adr.it/fiumicino",wiki:"https://en.wikipedia.org/wiki/Leonardo_da_Vinci%E2%80%93Fiumicino_Airport",type:3,keywords:["airport","ryanair","fiumicino","neos","alitalia","airplanes"]},{name:"Termini Station",address:["Roma Termini, Italy"],website:"http://www.trenitalia.com/tcom-en",type:3,keywords:["trains","station","choo"]},{name:"Trevi Fountain",address:["Piazza di Trevi, 00187 Roma, Italy"],website:"http://www.trevifountain.net/",wiki:"https://en.wikipedia.org/wiki/Trevi_Fountain",type:0,keywords:["trevi","fountain","wish","salvi","bracci"]}]};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJmaXhlcmlvX3VwZGF0ZSIsImN1cnJlbmNpZXMiLCJqUXVlcnkiLCJnZXRKU09OIiwiZGF0YSIsInRlbXBJZCIsImlkVGVtcGxhdGUiLCJpIiwibGVuZ3RoIiwicmVwbGFjZSIsIiQiLCJ0ZXh0IiwicmF0ZXMiLCJzZXRUaW1lb3V0Iiwicm9vdCIsImZpeGVyaW9fYXBpIiwiY3VycmVuY3kiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlMSIsInRlbXAiLCJiYXNlIiwiYXBwZW5kIiwiQ3JlYXRlTWFya2VyIiwicGxhY2UiLCJtYXAiLCJtYXJrZXIiLCJnb29nbGUiLCJtYXBzIiwiTWFya2VyIiwicG9zaXRpb24iLCJsYXQiLCJnZW9tZXRyeSIsImxvY2F0aW9uIiwibG5nIiwidGl0bGUiLCJuYW1lIiwiTWFpblZpZXdNb2RlbCIsImpzb25GaWxlIiwic2VsZiIsInRoaXMiLCJjb250YWluZXIiLCJMb2NDb250YWluZXIiLCJSb21lIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJwbGFjZVNlcnZpY2UiLCJwbGFjZXMiLCJQbGFjZXNTZXJ2aWNlIiwiaW5pdGlhbGl6ZSIsIm1haW4iLCJsb2NhdGlvbkRhdGEiLCJrbyIsImFwcGx5QmluZGluZ3MiLCJhbGxWaXNpYmxlIiwiaW5pdCIsImV2ZW50IiwiYWRkRG9tTGlzdGVuZXIiLCJ3aW5kb3ciLCJjb25zb2xlIiwibG9nIiwiTG9jYXRpb24iLCJpbml0RGF0YSIsIm9ic2VydmFibGUiLCJhZGRyZXNzIiwib2JzZXJ2YWJsZUFycmF5Iiwid2lraSIsInR5cGUiLCJ3ZWJzaXRlIiwia2V5d29yZHMiLCJ2aXNpYmxlIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzZWFyY2giLCJwYXJ0aWFsIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImxvY2F0aW9ucyIsImZvckVhY2giLCJpdGVtIiwicHVzaCIs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dGlvbi9NYXJrZXIqL1xudmFyIExvY2F0aW9uID0gZnVuY3Rpb24oIGluaXREYXRhICkge1xuICAgIHRoaXMubmFtZSA9IGtvLm9ic2VydmFibGUoIGluaXREYXRhLm5hbWUgfHwgJycgKTtcbiAgICB0aGlzLmFkZHJlc3MgPSBrby5vYnNlcnZhYmxlQXJyYXkoIGluaXREYXRhLmFkZHJlc3MgfHwgW1wiXCJdICk7XG4gICAgdGhpcy53aWtpID0ga28ub2JzZXJ2YWJsZSggaW5pdERhdGEud2lraSB8fCAnJyApO1xuICAgIHRoaXMudHlwZSA9IGtvLm9ic2VydmFibGUoIGluaXREYXRhLnR5cGUgfHwgNSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogMCAtIEhpc3RvcmljYWwgTWFya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxIC0gSW5mb3JtYXRpb24gQ2VudGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyIC0gUmVzdGF1cmFudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMyAtIFRyYW5zcG9ydGF0aW9uIEh1YiBidXMvdHJhaW4vYWlycG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNCAtIENodXJjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNSAtIE90aGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICB0aGlzLndlYnNpdGUgPSBrby5vYnNlcnZhYmxlKCBpbml0RGF0YS53ZWJzaXRlIHx8ICcnICk7XG4gICAgdGhpcy5rZXl3b3JkcyA9IGtvLm9ic2VydmFibGVBcnJheSggaW5pdERhdGEua2V5d29yZHMgfHwgW10pO1xuICAgIHRoaXMudmlzaWJsZSA9IGtvLm9ic2VydmFibGUodHJ1ZSk7XG59O1xuTG9jYXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPYmplY3QucHJvdG90eXBlKTtcbkxvY2F0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExvY2F0aW9uO1xuXG5Mb2NhdGlvbi5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocGFydGlhbCkge1xuICAgIGlmICh0aGlzLm5hbWUoKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBhcnRpYWwpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmtleXdvcmRzKCkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmKHRoaXMua2V5d29yZHMoKVtpXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBhcnRpYWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aXNpYmxlKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cblxuXG4vKiBUT0RPOiBDb250YWluZXIgb2YgTWFya2VycyB0byBmaWx0ZXIgdGhyb3VnaCB0aGUgbWFya2VycyAqL1xudmFyIExvY0NvbnRhaW5lciA9IGZ1bmN0aW9uICgganNvbkZpbGUgKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYubG9jYXRpb25zID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7XG4gICAganNvbkZpbGVbXCJyb21lLWFwcFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSAge1xuICAgICAgICBzZWxmLmxvY2F0aW9ucy5wdXNoKG5ldyBMb2NhdGlvbihpdGVtKSk7XG4gICAgfSk7XG59O1xuTG9jQ29udGFpbmVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LnByb3RvdHlwZSk7XG5Mb2NDb250YWluZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTG9jQ29udGFpbmVyO1xuXG5Mb2NDb250YWluZXIucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uKHdvcmQpIHtcbiAgICB0aGlzLmxvY2F0aW9ucygpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0udmlzaWJsZSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0uc2VhcmNoKHdvcmQudG9Mb3dlckNhc2UoKSkpIHtcblxuICAgICAgICAgICAgfSBlbHNlIHt9XG4gICAgICAgIH1cblxuICAgIH0pO1xufTtcblxuTG9jQ29udGFpbmVyLnByb3RvdHlwZS5zZXRUeXBlVmlzaWJsZSA9IGZ1bmN0aW9uKCB0eXBlICkge1xuICAgIHRoaXMubG9jYXRpb25zKCkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiggaXRlbS50eXBlKCkgIT0gdHlwZSApIHtcbiAgICAgICAgICAgIGl0ZW0udmlzaWJsZShmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpdGVtLnZpc2libGUodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiU2V0VHlwZVZpc2libGUgXCIgKyBTdHJpbmcodHlwZSkpO1xufTtcblxuTG9jQ29udGFpbmVyLnByb3RvdHlwZS5hbGxWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubG9jYXRpb25zKCkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpdGVtLnZpc2libGUodHJ1ZSk7XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coXCJBbGwgVmlzaWJsZVwiKTtcbn07XG5mdW5jdGlvbiBmaXhlcmlvX3VwZGF0ZShjdXJyZW5jaWVzKSB7XG4gICAgalF1ZXJ5LmdldEpTT04oJ2h0dHA6Ly9hcGkuZml4ZXIuaW8vbGF0ZXN0JywgZnVuY3Rpb24oZGF0YSkgeyAvLyBFVVIgaXMgdGhlIGRlZmF1bHQgYmFzZS4gU2VlIGZpeGVyLmlvXG4gICAgICAgIHZhciBpZFRlbXBsYXRlID0gXCIjJUNVUlJFTkNZJS1kYXRhXCI7XG4gICAgICAgIHZhciB0ZW1wSWQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VycmVuY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGVtcElkID0gaWRUZW1wbGF0ZS5yZXBsYWNlKFwiJUNVUlJFTkNZJVwiLCBjdXJyZW5jaWVzW2ldKTtcbiAgICAgICAgICAgICQodGVtcElkKS50ZXh0KGRhdGEucmF0ZXNbY3VycmVuY2llc1tpXV0pO1xuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoZml4ZXJpb191cGRhdGUsIDMwMDAwMCwgcm9vdCk7XG4gICAgfSk7XG59XG4vKkRPTkU6IEZpeGVyLmlvIEN1cnJlbmN5IENvbnZlcnNpb24qL1xuZnVuY3Rpb24gZml4ZXJpb19hcGkoY3VycmVuY2llcykge1xuICAgIGpRdWVyeS5nZXRKU09OKCdodHRwOi8vYXBpLmZpeGVyLmlvL2xhdGVzdCcsIGZ1bmN0aW9uKGRhdGEpIHsgLy8gRVVSIGlzIHRoZSBkZWZhdWx0IGJhc2UuIFNlZSBmaXhlci5pb1xuICAgICAgICB2YXIgY3VycmVuY3kgPSAkKCcjY3VycmVuY2llc1RhcmdldCcpO1xuICAgICAgICB2YXIgdGVtcGxhdGUgPSBcIjx0cj48dGQ+JUNVUlJFTkNZJTwvdGQ+PHRkIGlkPVxcXCIlQ1VSUkVOQ1klLWRhdGFcXFwiPjwvdGQ+PC90cj5cIjtcbiAgICAgICAgdmFyIHRlbXBsYXRlMSA9IFwiPHRyPjx0ZD4lQ1VSUkVOQ1klPC90ZD48dGQ+JUFNT1VOVCU8L3RkPjwvdHI+XCI7XG4gICAgICAgIHZhciBpZFRlbXBsYXRlID0gXCIjJUNVUlJFTkNZJS1kYXRhXCI7XG4gICAgICAgIHZhciB0ZW1wID0gdGVtcGxhdGUxLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGRhdGEuYmFzZSk7XG4gICAgICAgIHZhciB0ZW1wSWQgPSBpZFRlbXBsYXRlO1xuICAgICAgICB0ZW1wID0gdGVtcC5yZXBsYWNlKFwiJUFNT1VOVCVcIiwgXCIxLjAwXCIpO1xuICAgICAgICBjdXJyZW5jeS5hcHBlbmQodGVtcCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VycmVuY2llcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGVtcCA9IHRlbXBsYXRlLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGN1cnJlbmNpZXNbaV0pO1xuICAgICAgICAgICAgdGVtcCA9IHRlbXAucmVwbGFjZShcIiVDVVJSRU5DWSVcIiwgY3VycmVuY2llc1tpXSk7XG4gICAgICAgICAgICB0ZW1wSWQgPSBpZFRlbXBsYXRlLnJlcGxhY2UoXCIlQ1VSUkVOQ1klXCIsIGN1cnJlbmNpZXNbaV0pO1xuICAgICAgICAgICAgY3VycmVuY3kuYXBwZW5kKHRlbXApO1xuICAgICAgICAgICAgJCh0ZW1wSWQpLnRleHQoZGF0YS5yYXRlc1tjdXJyZW5jaWVzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmaXhlcmlvX3VwZGF0ZSwgMzAwMDAwLCBjdXJyZW5jaWVzKTtcbiAgICB9KTtcbn1cblxuLypUT0RPOiBtYXJrZXIgZGF0YSAqL1xudmFyIGxvY2F0aW9uRGF0YSA9IHtcbiAgICBcInJvbWUtYXBwXCI6IFsge1xuICAgIFwibmFtZVwiOiBcIkNvbG9zc2V1bVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJQaWF6emEgZGVsIENvbG9zc2VvLCBSb21lLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL3RoZS1jb2xvc3NldW0uY2ZtXCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29sb3NzZXVtXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiZ2xhZGlhdG9yXCIsXG4gICAgICAgIFwiZmlnaHRcIixcbiAgICAgICAgXCJyaW5nXCIsXG4gICAgICAgIFwiZ2FtZXNcIixcbiAgICAgICAgXCJzcG9ydFwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJQYW50aGVvbiwgUm9tZVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJQaWF6emEgZGVsbGEgUm90b25kYSBSb21lLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LnR1cmlzbW9yb21hLml0L2Nvc2EtZmFyZS9wYW50aGVvbj9sYW5nPWVuXCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFudGhlb24sX1JvbWVcIixcbiAgICBcInR5cGVcIjogMCxcbiAgICBcImtleXdvcmRzXCI6IFtcbiAgICAgICAgXCJjaHVyY2hcIixcbiAgICAgICAgXCJkb21lXCIsXG4gICAgICAgIFwidGVtcGxlXCJcbiAgICBdXG4gICAgfSwge1xuICAgIFwibmFtZVwiOiBcIlN0LiBQZXRlcidzIEJhc2lsaWNhXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlBpYXp6YSBTYW4gUGlldHJvLCAwMDEyMCBDaXR0w6AgZGVsIFZhdGljYW5vLCBWYXRpY2FuIENpdHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy52YXRpY2Fuc3RhdGUudmEvY29udGVudC92YXRpY2Fuc3RhdGUvZW4vbW9udW1lbnRpL2Jhc2lsaWNhLWRpLXMtcGlldHJvLmh0bWxcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdC5fUGV0ZXIlMjdzX0Jhc2lsaWNhXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiY2h1cmNoXCIsXG4gICAgICAgIFwiYmFzaWxpY2FcIixcbiAgICAgICAgXCJ2YXRpY2FuXCIsXG4gICAgICAgIFwicG9wZVwiLFxuICAgICAgICBcInBldGVyXCIsXG4gICAgICAgIFwic2FpbnRcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiUHlyYW1pZCBvZiBDZXN0aWFcIixcbiAgICBcImFkZHJlc3NcIjogW1wiVmlhIFJhZmZhZWxlIFBlcnNpY2hldHRpLCAwMDE1MyBSb21hLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL2hlcml0YWdlLmNmbT9pZD01OVwiLFxuICAgIFwid2lraVwiOiBcImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1B5cmFtaWRfb2ZfQ2VzdGl1c1wiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInB5cmFtaWRcIixcbiAgICAgICAgXCJnYWl1c1wiLFxuICAgICAgICBcImNlc3RpdXNcIixcbiAgICAgICAgXCJ0b21iXCIsXG4gICAgICAgIFwicnVpbnNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiVW5kZXJncm91bmQgQmFzaWxpY2Egb2YgUG9ydGEgTWFnZ2lvcmVcIixcbiAgICBcImFkZHJlc3NcIjogW1wiUGlhenphbGUgTGFiaWNhbm8gYW5nb2xvIHZpYSBQcmVuZXN0aW5hLCBWaWEgUHJlbmVzdGluYSwgUm9tYSwgSXRhbHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL2FyY2hlb3JvbWEuYmVuaWN1bHR1cmFsaS5pdC9lbi9hcmNoYWVvbG9naWNhbC1zaXRlL3VuZGVyZ3JvdW5kLWJhc2lsaWNhLW5lYXItcG9ydGEtbWFnZ2lvcmVcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VbmRlcmdyb3VuZF9iYXNpbGljYV9vZl9Qb3J0YV9NYWdnaW9yZVwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcImJhc2lsaWNhXCIsXG4gICAgICAgIFwidW5kZXJncm91bmRcIixcbiAgICAgICAgXCJuZW9weXRoYWdvcmVhbnNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6IFwiUGFsYXp6byBEZWxsZSBFc3Bvc2l6aW9uaVwiLFxuICAgIFwiYWRkcmVzc1wiOiBbXCJWaWEgTmF6aW9uYWxlLCAxOTQsIDAwMTg0IFJvbWEsIEl0YWx5XCJdLFxuICAgIFwid2Vic2l0ZVwiOiBcImh0dHA6Ly9lbmdsaXNoLnBhbGF6em9lc3Bvc2l6aW9uaS5pdC9Ib21lLmFzcHhcIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYWxhenpvX2RlbGxlX0VzcG9zaXppb25pXCIsXG4gICAgXCJ0eXBlXCI6IDAsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiZXhoaWJpdGlvblwiLFxuICAgICAgICBcImhhbGxcIixcbiAgICAgICAgXCJjdWx0dXJhbFwiLFxuICAgICAgICBcImNlbnRlclwiLFxuICAgICAgICBcIm11c2V1bVwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJQYWxhdGluZSBIaWxsXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlZpYSBkZWxsYSBTYWxhcmEgVmVjY2hpYSwgNS82LCBSb21hLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LmNvb3BjdWx0dXJlLml0L2VuL2hlcml0YWdlLmNmbT9pZD00XCIsXG4gICAgXCJ3aWtpXCI6IFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFsYXRpbmVfSGlsbFwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInBhbGF0aW5lXCIsXG4gICAgICAgIFwiaGlsbFwiLFxuICAgICAgICBcImZvcnVtXCIsXG4gICAgICAgIFwicnVpbnNcIixcbiAgICAgICAgXCJhbmNpZW50XCIsXG4gICAgICAgIFwicm9tZVwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjogXCJUb3VyaXN0IEluZm9ybWF0aW9uIENlbnRlcnNcIixcbiAgICBcImFkZHJlc3NcIjogW1xuICAgICAgICBcIlZpYSBHaW92YW5uaSBHaW9saXR0aSAzNCwgUm9tYSwgSXRhbHlcIixcbiAgICAgICAgXCJWaWEgZGkgU2FuIEJhc2lsaW8gNTEsIFJvbWEsIEl0YWx5XCIsXG4gICAgICAgIFwiUGFsYXp6byBkZWxsZSBFc3Bvc2l6aW9uaSwgUm9tYSwgSXRhbHlcIixcbiAgICAgICAgXCJWaWEgZGVpIEZvcmkgSW1wZXJpYWxpLCBSb21hLCBJdGFseVwiXG4gICAgXSxcbiAgICBcIndlYnNpdGVcIjogXCJodHRwOi8vd3d3LnR1cmlzbW9yb21hLml0L2luZm9fdmlhZ2dpby9waXRcIixcbiAgICBcIndpa2lcIjogXCJub25lXCIsXG4gICAgXCJ0eXBlXCI6IDEsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiaW5mb3JtYXRpb25cIixcbiAgICAgICAgXCJjZW50ZXJcIixcbiAgICAgICAgXCJwaXRcIixcbiAgICAgICAgXCJwb2ludFwiXG4gICAgXVxuICAgIH0sIHtcbiAgICBcIm5hbWVcIjpcIkxlb25hcmRvIGRhIFZpbmNp4oCTRml1bWljaW5vIEFpcnBvcnRcIixcbiAgICBcImFkZHJlc3NcIjpbXCJWaWEgZGVsbCcgQWVyb3BvcnRvIGRpIEZpdW1pY2lubywgMzIwLCAwMDA1NCBGaXVtaWNpbm8gUk0sIEl0YWx5XCJdLFxuICAgIFwid2Vic2l0ZVwiOlwiaHR0cDovL3d3dy5hZHIuaXQvZml1bWljaW5vXCIsXG4gICAgXCJ3aWtpXCI6XCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MZW9uYXJkb19kYV9WaW5jaSVFMiU4MCU5M0ZpdW1pY2lub19BaXJwb3J0XCIsXG4gICAgXCJ0eXBlXCI6IDMsXG4gICAgXCJrZXl3b3Jkc1wiOiBbXG4gICAgICAgIFwiYWlycG9ydFwiLFxuICAgICAgICBcInJ5YW5haXJcIixcbiAgICAgICAgXCJmaXVtaWNpbm9cIixcbiAgICAgICAgXCJuZW9zXCIsXG4gICAgICAgIFwiYWxpdGFsaWFcIixcbiAgICAgICAgXCJhaXJwbGFuZXNcIlxuICAgIF1cbiAgICB9LCB7XG4gICAgXCJuYW1lXCI6XCJUZXJtaW5pIFN0YXRpb25cIixcbiAgICBcImFkZHJlc3NcIjogW1wiUm9tYSBUZXJtaW5pLCBJdGFseVwiXSxcbiAgICBcIndlYnNpdGVcIjpcImh0dHA6Ly93d3cudHJlbml0YWxpYS5jb20vdGNvbS1lblwiLFxuICAgIFwidHlwZVwiOiAzLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInRyYWluc1wiLFxuICAgICAgICBcInN0YXRpb25cIixcbiAgICAgICAgXCJjaG9vXCJcbiAgICBdXG4gICAgfSwge1xuICAgIFwibmFtZVwiOiBcIlRyZXZpIEZvdW50YWluXCIsXG4gICAgXCJhZGRyZXNzXCI6IFtcIlBpYXp6YSBkaSBUcmV2aSwgMDAxODcgUm9tYSwgSXRhbHlcIl0sXG4gICAgXCJ3ZWJzaXRlXCI6IFwiaHR0cDovL3d3dy50cmV2aWZvdW50YWluLm5ldC9cIixcbiAgICBcIndpa2lcIjogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UcmV2aV9Gb3VudGFpblwiLFxuICAgIFwidHlwZVwiOiAwLFxuICAgIFwia2V5d29yZHNcIjogW1xuICAgICAgICBcInRyZXZpXCIsXG4gICAgICAgIFwiZm91bnRhaW5cIixcbiAgICAgICAgXCJ3aXNoXCIsXG4gICAgICAgIFwic2FsdmlcIixcbiAgICAgICAgXCJicmFjY2lcIlxuICAgIF1cbiAgICB9XG4gIF1cbn07XG5cbmZ1bmN0aW9uIENyZWF0ZU1hcmtlcihwbGFjZSwgbWFwKSB7XG4gICAgdmFyIG1hcmtlciwgaW5mb3dpbmRvdztcbiAgICBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgIHBvc2l0aW9uOiB7bGF0OiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSwgbG5nOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKX0sXG4gICAgICAgIHRpdGxlOiBwbGFjZS5uYW1lXG4gICAgfSk7XG59XG5cbi8qVE9ETzogUGFydCBvZiB0aGUgYXBwIHRoYXQgc3RhcnRzIGV2ZXJ5dGhpbmcqL1xuZnVuY3Rpb24gTWFpblZpZXdNb2RlbChqc29uRmlsZSkge1xuICAgIC8vIFRPRE86IENvbm5lY3QgZXZlcnl0aGluZy4uLi5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5jb250YWluZXIgPSBuZXcgTG9jQ29udGFpbmVyKGpzb25GaWxlKTtcbiAgICBzZWxmLmN1cnJlbmNpZXMgPSBbJ1VTRCcsICdDSEYnLCAnR0JQJywgJ0FVRCcsICdDQUQnLCAnQ1pLJ107XG5cbiAgICAvKlRPRE86IFZpZXcgcGFydCBmb3IgdGhlIE1hcCovXG4gICAgc2VsZi5Sb21lID0ge2xhdDogNDEuOSwgbG5nOiAxMi41fTtcbiAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JvbWVNYXAnKSwge1xuICAgICAgICB6b29tOiAxMixcbiAgICAgICAgY2VudGVyOiBzZWxmLlJvbWVcbiAgICB9KTtcbiAgICBzZWxmLnBsYWNlU2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuUGxhY2VzU2VydmljZShzZWxmLm1hcCk7XG5cbiAgICAvKlRPRE86IFZpZXcgcGFydCBmb3IgbWFya2VyKi9cblxuXG5cbn1cbmZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgdmFyIG1haW4gPSBuZXcgTWFpblZpZXdNb2RlbChsb2NhdGlvbkRhdGEpO1xuICAgIGZpeGVyaW9fYXBpKG1haW4uY3VycmVuY2llcyk7XG4gICAga28uYXBwbHlCaW5kaW5ncyhtYWluKTtcbiAgICBtYWluLmNvbnRhaW5lci5hbGxWaXNpYmxlKCk7XG59XG5mdW5jdGlvbiBpbml0KCkge1xuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHdpbmRvdywgXCJsb2FkXCIsIGluaXRpYWxpemUpO1xuICAgIGNvbnNvbGUubG9nKFwiUnVucyBvbiByZWFkeSFcIik7XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
